<div class="container-mt5" style='text-align: center;'>
  <h2>New document</h2>
  <form
      *ngIf="categoriesSelectOptions"
     [formGroup]="newDocForm"
     (ngSubmit)="onSubmit(newDocForm)">
     <div class="mb-2">
       <label>
         Name:
         <input id="name" formControlName="name" placeholder="Document name">
       </label>
       <div *ngIf="newDocForm.get('name')?.invalid && (newDocForm.get('name')?.dirty || newDocForm.get('name')?.touched)" class="error-field">
         <p class="error">Please provide a name.</p>
       </div>
     </div>
     <div class="mt-2">
       <label>
         Version:
         <input id="version" formControlName="version" placeholder="Doc version" readonly>
       </label>
     </div>
     <div class="mt-2">
       <label>
         Author:
         <input class="formInput" id="author" formControlName="author" placeholder="Doc author">
       </label>
       <div *ngIf="newDocForm.get('author')?.invalid && (newDocForm.get('author')?.dirty || newDocForm.get('author')?.touched)">
         <p class="error">Please provide an author.</p>
       </div>
     </div>
     <div  class="d-flex justify-content-center mt-2 align-items-center">
      <label class="mr-2">Category: </label>

        <!-- <select
            class="custom-select mb-3"
            formControlName="categoryName"
            [(ngModel)]="selectedCategory"
            (change)="onSelectionChange()"
            >
            <optgroup *ngFor="let category of Categories" label="{{category.name}}">
              <option class="parent" [value]="category.id">
                {{category.name}}
              </option>
              <option class="child" *ngFor="let subcategory of category.children" [value]="subcategory.id">
              {{subcategory.name}}
              </option>
            </optgroup>

          </select> -->

          <ngx-mat-tree-select-input
          (selectionChanged)="onSelectionChanged()"
          (click)="onSelectionChanged()"
          [options]="categoriesSelectOptions"
          [placeholder]="'Select category'"
          [controlName]="'category'"
          >

          <input
            #searchInput
            placeholder="Search"
            (keyup)="filter(categoriesSelectOptions, searchInput.value)"
          >
        </ngx-mat-tree-select-input>
        <button type="button" matSuffix mat-icon-button aria-label="Refresh" (click)="reloadCategorySelect()">
          <span class="material-icons">refresh</span>
        </button>



<!--
          <ngx-mat-tree-select-input-ngmodel
          [(select)]="selectedCategory"
          (selectionChanged)="onSelectionChanged()"
          (click)="onSelectionChanged()"
          [options]="options"
          [placeholder]="'Select category'" >

          <input
            #searchInput
            placeholder="Search"
            (keydown)="$event.stopPropagation()"
            (keyup)="filter(options, searchInput.value)"
          >
        </ngx-mat-tree-select-input>
        <button type="button" matSuffix mat-icon-button aria-label="Refresh" (click)="reloadCategorySelect()">
          <span class="material-icons">refresh</span>
        </button>-->



    </div>

    <div>
      <label>
        Text:
      </label>
      <div>
        <textarea  id="text" formControlName="text" placeholder="Doc text" rows="15" cols="150"></textarea>
      </div>

      <div *ngIf="newDocForm.get('text')?.invalid && (newDocForm.get('text')?.dirty || newDocForm.get('text')?.touched)">
        <p class="error">Please provide a text.</p>
      </div>
    </div>
    <div class="text-center">
      <button [disabled]="!newDocForm.valid" class="btn btn-success mr-5" type="submit">Save document</button>
      <button class="btn btn-default ml-5" (click)="cancel()" type="button">Cancel</button>
    </div>
      </form>
